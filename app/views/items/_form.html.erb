<%= form_with model: @item, local: true do |f| %>
  <%= render "shared/error_messages", model: @item %>

  <!-- 商品画像 -->
  <div class="img-upload">
    <div class="weight-bold-text">
      商品画像 <span class="indispensable">必須</span>
    </div>
    <div class="click-upload">
      <p>クリックしてファイルをアップロード</p>
      <%= f.file_field :image, id: "item-image" %>
    </div>
  </div>

  <!-- 商品名と商品説明 -->
  <div class="new-items">
    <div class="weight-bold-text">
      商品名 <span class="indispensable">必須</span>
    </div>
    <%= f.text_area :name, class: "items-text", id: "item-name",
                    placeholder: "商品名（必須 40文字まで）", maxlength: 40 %>
    <div class="items-explain">
      <div class="weight-bold-text">
        商品の説明 <span class="indispensable">必須</span>
      </div>
      <%= f.text_area :description, class: "items-text", id: "item-info",
                      placeholder: "商品の説明（必須 1,000文字まで）",
                      rows: 7, maxlength: 1000 %>
    </div>
  </div>

  <!-- 商品の詳細 -->
  <div class="items-detail">
    <div class="weight-bold-text">商品の詳細</div>
    <div class="form">
      <div class="weight-bold-text">
        カテゴリー <span class="indispensable">必須</span>
      </div>
      <%= f.collection_select :category_id, Category.all, :id, :name,
            {}, { class: "select-box", id: "item-category" } %>

      <div class="weight-bold-text">
        商品の状態 <span class="indispensable">必須</span>
      </div>
      <%= f.collection_select :status_id, Status.all, :id, :name,
            {}, { class: "select-box", id: "item-sales-status" } %>
    </div>
  </div>

  <!-- 配送について -->
  <div class="items-detail">
    <div class="weight-bold-text question-text">
      <span>配送について</span>
      <a class="question" href="#">?</a>
    </div>
    <div class="form">
      <div class="weight-bold-text">
        配送料の負担 <span class="indispensable">必須</span>
      </div>
      <%= f.collection_select :shipping_fee_id, ShippingFee.all, :id, :name,
            {}, { class: "select-box", id: "item-shipping-fee-status" } %>

      <div class="weight-bold-text">
        発送元の地域 <span class="indispensable">必須</span>
      </div>
      <%= f.collection_select :prefecture_id, Prefecture.all, :id, :name,
            {}, { class: "select-box", id: "item-prefecture" } %>

      <div class="weight-bold-text">
        発送までの日数 <span class="indispensable">必須</span>
      </div>
      <%= f.collection_select :schedule_id, Schedule.all, :id, :name,
            {}, { class: "select-box", id: "item-scheduled-delivery" } %>
    </div>
  </div>

  <!-- 販売価格 -->
  <div class="sell-price" data-controller="price">
    <div class="weight-bold-text question-text">
      <span>販売価格<br>(¥300〜9,999,999)</span>
      <a class="question" href="#">?</a>
    </div>
    <div>
      <div class="price-content">
        <div class="price-text">
          <span>価格</span><span class="indispensable">必須</span>
        </div>
        <span class="sell-yen">¥</span>
        <%= f.text_field :price,
              class: "price-input",
              id: "item-price",
              placeholder: "例）300",
              inputmode: "numeric",
              data: { price_target: "price", action: "input->price#recalc" } %>
      </div>

      <div class="price-content">
        <span>販売手数料 (10%)</span>
        <span><span id="add-tax-price" data-price-target="fee"></span>円</span>
      </div>
      <div class="price-content">
        <span>販売利益</span>
        <span><span id="profit" data-price-target="profit"></span>円</span>
      </div>
    </div>
  </div>

  <!-- 下部ボタン -->
<div class="sell-btn-contents">
  <% submit_text = local_assigns[:submit_label] || (action_name == 'edit' ? '変更する' : '出品する') %>
  <%= f.submit submit_text, class: "sell-btn" %>
  <% back_to = local_assigns[:back_path] || (action_name == 'edit' ? item_path(@item) : root_path) %>
  <%= link_to 'もどる', back_to, class: "back-btn", data: { turbo: false } %>
</div>
<% end %>